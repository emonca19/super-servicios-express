<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Servicios Express - Inicio</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header Component -->
    <header-component></header-component>

    <main>
        <!-- Hero Section -->
        <section class="relative h-[60vh] min-h-[500px] bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white flex items-center">
            <div class="absolute inset-0 bg-black opacity-20"></div>
            
            <div class="container mx-auto px-6 relative z-10">
                <div class="max-w-2xl">
                    <h1 class="text-5xl md:text-6xl font-bold leading-tight mb-6">
                        ¬°Tu Carro en las mejores manos!
                    </h1>
                    <p class="text-xl md:text-2xl mb-8 text-gray-100">
                        Servicio mec√°nico de calidad. M√°s de 4 a√±os de experiencia al servicio de tu veh√≠culo.
                    </p>
                    <a href="agendar-cita.html" class="inline-block bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-10 rounded-full text-lg transition duration-300 shadow-2xl hover:scale-105 transform">
                        Agendar Cita Ahora ‚Üí
                    </a>
                </div>
            </div>
        </section>

        <!-- Caracter√≠sticas -->
        <section class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">¬øPor qu√© elegirnos?</h2>
                    <p class="text-lg text-gray-600">Nos destacamos por nuestro compromiso con la excelencia</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <feature-card 
                        icon-type="clock"
                        title="Rapidez"
                        description="Servicio express sin comprometer la calidad. Nosotros valoramos tu tiempo.">
                    </feature-card>

                    <feature-card
                        icon-type="check"
                        title="Calidad"
                        description="Repuestos originales y de alta calidad. T√©cnicos certificados para un trabajo impecable.">
                    </feature-card>

                    <feature-card
                        icon-type="shield"
                        title="Confianza"
                        description="Garant√≠a en todos nuestros servicios. Tu satisfacci√≥n es nuestra prioridad.">
                    </feature-card>
                </div>
            </div>
        </section>

        <!-- Servicios Populares -->
        <section class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">Servicios M√°s Populares</h2>
                    <p class="text-lg text-gray-600">Conoce los servicios m√°s solicitados por nuestros clientes</p>
                </div>

                <div id="services-container" class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                    <!-- Loading state -->
                    <div class="col-span-3 text-center py-12">
                        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
                        <p class="mt-4 text-gray-600">Cargando servicios...</p>
                    </div>
                </div>

                <div class="text-center">
                    <a href="#servicios" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 shadow-lg hover:scale-105 transform">
                        Ver Todos Los Servicios ‚Üí
                    </a>
                </div>
            </div>
        </section>

        <!-- CTA -->
        <section class="bg-gradient-to-r from-blue-600 to-blue-700 text-white py-20">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-5xl font-bold mb-6">¬øListo para Darle a Tu Auto el Servicio Que Merece?</h2>
                <p class="text-2xl mb-10 opacity-90">Agenda tu cita ahora y recibe atenci√≥n inmediata</p>
                <a href="agendar-cita.html" class="inline-block bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-10 rounded-full text-lg transition duration-300 shadow-2xl hover:scale-105 transform">
                    Agendar Mi Cita ‚Üí
                </a>
            </div>
        </section>
    </main>

    <!-- Footer Component -->
    <footer-component></footer-component>

    <!-- Scripts -->
    <script type="module">
        console.log('üöÄ Iniciando aplicaci√≥n...');

        // ==========================================
        // IMPORTAR WEB COMPONENTS
        // ==========================================
        
        try {
            // Importar componentes
            await import('./assets/js/components/header-component.js');
            await import('./assets/js/components/footer-component.js');
            await import('./assets/js/components/feature-card.js');
            await import('./assets/js/components/service-card.js');
            console.log('‚úÖ Web Components cargados');
        } catch (error) {
            console.error('‚ùå Error cargando Web Components:', error);
        }

        // ==========================================
        // IMPORTAR Y USAR SERVICIOS
        // ==========================================
        
        try {
            // Importar el servicio
            const { ServicesService } = await import('./assets/js/services/services.service.js');
            console.log('‚úÖ ServicesService importado');

            const servicesService = new ServicesService();
            const servicesContainer = document.getElementById('services-container');

            // Funci√≥n para cargar servicios populares
            async function loadPopularServices() {
                try {
                    console.log('üîÑ Cargando servicios desde el backend...');
                    
                    // Intentar obtener servicios del backend
                    const services = await servicesService.getPopular(3);
                    
                    console.log('‚úÖ Servicios obtenidos:', services);

                    if (!services || services.length === 0) {
                        servicesContainer.innerHTML = `
                            <div class="col-span-3 text-center py-12">
                                <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                                </svg>
                                <p class="text-gray-600 text-lg">No hay servicios disponibles</p>
                                <p class="text-gray-500 text-sm mt-2">Verifica que el backend est√© corriendo en puerto 8000</p>
                            </div>
                        `;
                        return;
                    }

                    // Renderizar servicios
                    servicesContainer.innerHTML = services.map(service => `
                        <service-card
                            title="${service.name || service.nombre || 'Servicio'}"
                            description="${service.description || service.descripcion || 'Descripci√≥n del servicio'}"
                            price="${service.price || service.precio || '0'}">
                        </service-card>
                    `).join('');

                } catch (error) {
                    console.error('‚ùå Error al cargar servicios:', error);
                    
                    servicesContainer.innerHTML = `
                        <div class="col-span-3 text-center py-12">
                            <div class="bg-red-50 border-2 border-red-200 rounded-lg p-8 inline-block max-w-md">
                                <svg class="w-16 h-16 text-red-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <p class="text-red-600 font-semibold text-lg mb-2">Error al cargar servicios</p>
                                <p class="text-red-500 text-sm mb-4">${error.message}</p>
                                <div class="bg-white p-4 rounded mb-4 text-left">
                                    <p class="text-gray-700 text-sm font-semibold mb-2">Verifica:</p>
                                    <ul class="text-gray-600 text-xs space-y-1">
                                        <li>‚úì Backend corriendo en: <code class="bg-gray-100 px-1">http://localhost:8000</code></li>
                                        <li>‚úì Archivo existe: <code class="bg-gray-100 px-1">assets/js/services/api-client.js</code></li>
                                        <li>‚úì CORS habilitado en el backend</li>
                                    </ul>
                                </div>
                                <button onclick="window.location.reload()" class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition">
                                    Reintentar
                                </button>
                            </div>
                        </div>
                    `;
                }
            }

            // Cargar servicios cuando el DOM est√© listo
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', loadPopularServices);
            } else {
                loadPopularServices();
            }

        } catch (error) {
            console.error('‚ùå Error importando servicios:', error);
            
            const servicesContainer = document.getElementById('services-container');
            if (servicesContainer) {
                servicesContainer.innerHTML = `
                    <div class="col-span-3 text-center py-12">
                        <div class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-8 inline-block">
                            <p class="text-yellow-700 font-semibold mb-2">‚ö†Ô∏è Error de configuraci√≥n</p>
                            <p class="text-yellow-600 text-sm">No se pudo cargar el m√≥dulo de servicios.</p>
                            <p class="text-gray-600 text-xs mt-2">Verifica que exista: <code>assets/js/services/services.service.js</code></p>
                        </div>
                    </div>
                `;
            }
        }
    </script>

</body>
</html>